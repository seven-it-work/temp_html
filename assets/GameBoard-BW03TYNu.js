import{u as G,D as ae,h as X,P as ie,T as le,A as re,m as Z,M as ce,i as de,a as ue}from"./MinionClassMap-DjRccpwo.js";import{d as R,c as r,s as J,a as t,l as y,v as U,t as c,F as B,r as H,g as F,o as a,_ as z,x as Y,i as V,q as O,b as s,f as N,p as L,k as pe,j as ve,h as A,w as E,B as _e,y as ge,z as ye,C as he}from"./index-CU42gLE2.js";const fe={class:"minion-type"},me={class:"minion-name"},Me={class:"minion-stats"},ke={class:"attack"},be={class:"health"},we={class:"minion-keywords"},Se={key:0,class:"buy-indicator"},Ce={class:"cost"},Te={key:1,class:"minion-status"},De=R({__name:"MinionCard",props:{minion:{},isOpponent:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},isHighlighted:{type:Boolean,default:!1},showBuyIndicator:{type:Boolean,default:!1}},emits:["click"],setup(g,{emit:e}){const S=f=>["#ffffff","#757575","#1e88e5","#43a047","#fb8c00","#e53935","#8e24aa"][Math.min(f,6)],h=f=>({taunt:"嘲讽",divine_shield:"圣盾",windfury:"风怒",super_windfury:"超级风怒",stealth:"潜行",charge:"冲锋",poisonous:"剧毒",reborn:"复生",immune:"免疫"})[f]||f;return(f,_)=>(a(),r("div",{class:J(["minion-card",{"opponent-minion":g.isOpponent,selected:g.isSelected,"highlighted-target":g.isHighlighted}]),onClick:_[0]||(_[0]=C=>f.$emit("click"))},[t("div",{class:"minion-star",style:U({backgroundColor:S(g.minion.tier||1)})},c(g.minion.tier||1),5),t("div",fe,c(g.minion.minionTypesCN.join("/")||"中立"),1),t("div",me,c(g.minion.nameCN||g.minion.name),1),t("div",Me,[t("div",ke,c(g.minion.attack),1),t("div",be,c(g.minion.health),1)]),t("div",we,[(a(!0),r(B,null,H(g.minion.keywords,C=>(a(),r("span",{key:C,class:"keyword-tag"},c(h(C)),1))),128))]),g.showBuyIndicator?(a(),r("div",Se,[t("span",Ce,c(g.minion.cost),1),_[1]||(_[1]=F(" 购买 ",-1))])):y("",!0),g.minion.hasAttacked?(a(),r("div",Te,[..._[2]||(_[2]=[t("span",null,"已攻击",-1)])])):y("",!0)],2))}}),q=z(De,[["__scopeId","data-v-92c5ae7a"]]),$e={class:"minions-area"},Be=["onDragstart"],He={key:1,class:"empty-slot"},Pe=R({__name:"Tavern",setup(g){const e=G(),S=Y("cardRatio",V("3/4")),h=e.tavern,f=(m,u)=>{if(e.spellUsageState==="selecting_target"&&e.selectedSpell){const i=e.highlightedTargets.find(l=>l.source==="tavern"&&l.index===u&&l.target===m);i&&e.selectSpellTarget(i)}else e.selectedMinion&&e.selectedMinionIndex===u?e.cancelSelectMinion():e.selectMinion(m,u,"tavern")},_=(m,u,i)=>!e.selectedSpell||e.spellUsageState!=="selecting_target"?!1:e.highlightedTargets.some(l=>l.source===u&&l.index===i&&l.target===m),C=(m,u,i,l)=>{l&&m.dataTransfer?.setData("text/plain",JSON.stringify({source:u,index:i,minionId:l.instanceId,strId:l.strId}))},P=m=>{m.preventDefault()},x=(m,u)=>{m.preventDefault();const i=m.dataTransfer?.getData("text/plain");if(i)try{const l=JSON.parse(i);l.source==="battlefield"&&u==="tavern"&&e.sellMinion("minion",l.index)}catch{}};return(m,u)=>(a(),r("div",{class:"tavern-container",onDragover:O(P,["prevent"]),onDrop:u[0]||(u[0]=i=>x(i,"tavern"))},[t("div",$e,[(a(),r(B,null,H(7,i=>t("div",{key:i,class:J(["minion-slot",{empty:!s(h)?.availableMinions?.[i-1]}]),style:U({aspectRatio:s(S)}),draggable:"true",onDragstart:l=>C(l,"tavern",i-1,s(h)?.availableMinions?.[i-1])},[s(h)?.availableMinions?.[i-1]?(a(),N(q,{key:0,minion:s(h).availableMinions[i-1],"is-selected":s(e).selectedMinion?.instanceId===s(h).availableMinions[i-1]?.instanceId,"is-highlighted":_(s(h).availableMinions[i-1],"tavern",i-1),onClick:l=>f(s(h).availableMinions[i-1],i-1)},null,8,["minion","is-selected","is-highlighted","onClick"])):(a(),r("div",He,[...u[1]||(u[1]=[t("span",null,"空",-1)])]))],46,Be)),64))])],32))}}),xe=z(Pe,[["__scopeId","data-v-a944bd1d"]]),Ie={class:"spell-card"},Ae={class:"spell-card-inner"},Le={class:"spell-name"},Ne={class:"spell-description"},Re={class:"spell-type"},ze=R({__name:"SpellCard",props:{spell:{}},setup(g){return(e,S)=>(a(),r("div",Ie,[t("div",Ae,[t("div",Le,c(g.spell.nameCN),1),t("div",Ne,c(g.spell.text),1),t("div",Re,c(g.spell.type==="shaping"?"塑造法术":"法术"),1)])]))}}),Fe=z(ze,[["__scopeId","data-v-c7442964"]]),Oe={class:"hand-container"},Ue=["onDragstart"],Ve=R({__name:"Hand",setup(g){const e=G(),{player:S}=e,h=Y("cardRatio",V("3/4")),f=L(()=>{const i=S?.cards.length||0;return Math.max(0,10-i)}),_=(u,i)=>{u.cardType==="minion"?e.selectMinion(u,i,"hand"):u.cardType==="spell"&&e.selectSpell(u,i)},C=(u,i,l,d)=>{if(!d){u.preventDefault();return}d.cardType==="spell"?(e.startSpellDrag(u,d,l),u.preventDefault()):u.dataTransfer?.setData("text/plain",JSON.stringify({source:i,index:l,cardId:d.id,strId:d.strId,cardType:d.cardType}))},P=u=>{e.updateSpellDrag(u)},x=u=>{if(e.spellUsageState==="selecting_target"&&e.dragArrow.visible){const i=e.detectTargetAtPosition(u.clientX,u.clientY);e.endSpellDrag(u,i)}};window.addEventListener("mousemove",P),window.addEventListener("mouseup",x),pe(()=>{window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",x)});const m=(u,i)=>{u.preventDefault();const l=u.dataTransfer?.getData("text/plain");if(l)try{const d=JSON.parse(l);if(d.source==="tavern"&&i==="hand"){const v=d.index;e.buyMinion(v)||console.log("购买失败，可能是金币不足或手牌已满")}}catch{}};return(u,i)=>(a(),r("div",Oe,[t("div",{class:"hand-area",onDragover:i[0]||(i[0]=O(()=>{},["prevent"])),onDrop:i[1]||(i[1]=l=>m(l,"hand"))},[(a(!0),r(B,null,H(s(S)?.cards,(l,d)=>(a(),r("div",{key:l.id||d,class:"hand-slot",style:U({aspectRatio:s(h)}),draggable:"true",onDragstart:v=>C(v,"hand",d,l)},[l.cardType==="minion"?(a(),N(q,{key:0,minion:l,onClick:v=>_(l,d)},null,8,["minion","onClick"])):l.cardType==="spell"?(a(),N(Fe,{key:1,spell:l,onClick:v=>_(l,d)},null,8,["spell","onClick"])):y("",!0)],44,Ue))),128)),(a(!0),r(B,null,H(f.value,l=>(a(),r("div",{key:`empty-${l}`,class:"hand-slot empty",style:U({aspectRatio:s(h)})},[...i[2]||(i[2]=[t("div",{class:"empty-slot"},[t("span",null,"空")],-1)])],4))),128))],32)]))}}),je=z(Ve,[["__scopeId","data-v-601716ad"]]),Ee={class:"battlefield-container"},Ge={class:"player-area"},Je=["onClick","draggable","onDragstart","onDragover","onDrop"],Ke={key:1,class:"empty-slot"},Xe=R({__name:"Battlefield",setup(g){const e=G(),{player:S}=e,h=Y("cardRatio",V("3/4")),f=V(null),_=L(()=>S?.minions||[]),C=(i,l,d,v)=>{if(!v){i.preventDefault();return}f.value=d,i.dataTransfer?.setData("text/plain",JSON.stringify({source:l,index:d,minionId:v.instanceId,strId:v.strId}))},P=(i,l)=>{i.preventDefault()},x=(i,l)=>{i.preventDefault();const d=i.dataTransfer?.getData("text/plain");if(d)try{const v=JSON.parse(d);if(v.source==="hand"){let T=0;const I=_.value;if(typeof l=="number"){if(!I?.[l])T=l;else for(let b=0;b<7;b++)if(!I?.[b]){T=b;break}}else for(let b=0;b<7;b++)if(!I?.[b]){T=b;break}I.some(b=>b===null)&&e.placeMinionFromHand(v.index,T)}else if(v.source==="battlefield"&&typeof l=="number"){const T=l;f.value!==null&&f.value!==T&&(e.reorderMinions(f.value,T),e.selectedMinionIndex===f.value&&(e.selectedMinionIndex=T)),f.value=null}}catch{}},m=(i,l)=>{if(i)if(e.spellUsageState==="selecting_target"&&e.selectedSpell){const d=e.highlightedTargets.find(v=>v.source==="battlefield"&&v.index===l&&v.target===i);d&&e.selectSpellTarget(d)}else e.selectMinion(i,l,"battlefield")},u=(i,l,d)=>!e.selectedSpell||e.spellUsageState!=="selecting_target"?!1:e.highlightedTargets.some(v=>v.source===l&&v.index===d&&v.target===i);return(i,l)=>(a(),r("div",Ee,[t("div",Ge,[t("div",{class:"player-minions",onDragover:l[0]||(l[0]=O(()=>{},["prevent"]))},[(a(),r(B,null,H(7,d=>t("div",{key:d,class:J(["player-minion-slot",{empty:!_.value?.[d-1]}]),style:U({aspectRatio:s(h)}),onClick:v=>m(_.value?.[d-1],d-1),draggable:!!_.value?.[d-1],onDragstart:v=>C(v,"battlefield",d-1,_.value?.[d-1]),onDragover:O(v=>P(v),["prevent"]),onDrop:O(v=>x(v,d-1),["prevent"])},[_.value?.[d-1]?(a(),N(q,{key:0,minion:_.value[d-1],"is-selected":s(e).selectedMinion?.instanceId===_.value[d-1]?.instanceId,"is-highlighted":u(_.value[d-1],"battlefield",d-1)},null,8,["minion","is-selected","is-highlighted"])):(a(),r("div",Ke,[...l[1]||(l[1]=[t("span",null,"空",-1)])]))],46,Je)),64))],32)])]))}}),Ye=z(Xe,[["__scopeId","data-v-15f7edf9"]]),qe={class:"game-root"},Qe={class:"hero-initial"},We={class:"hero-info"},Ze={key:0},et={key:0},tt={key:1,class:"game-layout"},st={class:"right-section"},nt={class:"left-section"},ot={class:"tavern-header"},at={class:"tavern-level"},it={class:"level-text"},lt={class:"turn-info"},rt={class:"player-info"},ct={class:"player-health"},dt={class:"gold-info"},ut={class:"value"},pt={class:"turn-info"},vt={class:"value"},_t={class:"hero-info"},gt={class:"hero-name"},yt={class:"hero-health"},ht={class:"tavern-actions"},ft=["disabled"],mt={class:"cost"},Mt=["disabled"],kt={key:0,class:"selected-card-info"},bt={class:"card-info-section"},wt={class:"section-content"},St={key:0,class:"card-type minion-type"},Ct={key:1,class:"card-type spell-type"},Tt={class:"card-info-section"},Dt={class:"section-content"},$t={key:0,class:"buff-group permanent-buffs"},Bt={class:"buff-list"},Ht={class:"buff-name"},Pt={class:"buff-value"},xt={key:0},It={key:1},At={key:2},Lt={key:1,class:"buff-group temporary-buffs"},Nt={class:"buff-list"},Rt={class:"buff-name"},zt={class:"buff-value"},Ft={key:0},Ot={key:1},Ut={key:2},Vt={key:3,class:"buff-duration"},jt={key:2,class:"no-buffs"},Et={key:3,class:"spell-effects"},Gt={key:0,class:"card-info-section"},Jt={class:"section-content"},Kt={key:0,class:"keyword-group permanent-keywords"},Xt={class:"keyword-list"},Yt={key:1,class:"keyword-group temporary-keywords"},qt={class:"keyword-list"},Qt={key:2,class:"no-keywords"},Wt={key:1,class:"action-hint"},Zt={class:"cost"},es={key:2,class:"battle-result"},ts={class:"battle-result-content"},ss={class:"result-info"},ns={class:"winner-info"},os={class:"loser-info"},as={class:"damage-info"},is={key:3,class:"drag-arrow",style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",pointerEvents:"none",zIndex:9999}},ls=["x1","y1","x2","y2"],rs=["points"],cs=R({__name:"GameBoard",setup(g){const e=G(),S=M=>{const{startX:n,startY:D,endX:w,endY:$}=M,p=10,o=Math.atan2($-D,w-n);return[`${w},${$}`,`${w-p*Math.cos(o-Math.PI/6)},${$-p*Math.sin(o-Math.PI/6)}`,`${w-p*Math.cos(o+Math.PI/6)},${$-p*Math.sin(o+Math.PI/6)}`].join(" ")},h=V(!1),f=()=>{h.value=!0},_=()=>{h.value=!1},C=()=>{const D=[...X].sort(()=>.5-Math.random()).slice(0,3);e.setAvailableHeroes(D)},P=()=>{const M=Object.keys(Z),n=p=>{let o=[];return p.forEach(k=>{o.push(k),k.tokens&&Array.isArray(k.tokens)&&(o=o.concat(n(k.tokens))),k.upgradeCard&&(o.push(k.upgradeCard),k.upgradeCard.tokens&&Array.isArray(k.upgradeCard.tokens)&&(o=o.concat(n(k.upgradeCard.tokens))))}),o},w=n(ue).filter(p=>p.cardType==="minion"&&M.includes(p.strId)).map(p=>{const o=Z[p.strId]||ce;return new o(p.id,p.strId,p.cardType,p.name,p.nameCN,p.text,p.mechanics||[],p.referencedTags||[],p.img,p.art,p.tier,p.health,p.attack,p.minionTypes,p.minionTypesCN,p.upgradeCard)}),$=w.filter(p=>de[p.strId]!==!1);return{globalMinionPool:w,tavernMinionPool:$}},x=M=>{const{globalMinionPool:n,tavernMinionPool:D}=P(),w=M.heroPowerList?.[0]||{name:"未知技能",text:"无描述",manaCost:0},$={...M,heroPower:{name:w.name,description:w.text,type:"active",cost:w.manaCost,cooldown:0,currentCooldown:0,use:()=>{}}},p=new ie("player-1",$,!0),o=new le(1,D),k=[];for(let j=0;j<7;j++){const W=X[j%X.length],K=W.heroPowerList?.[0]||{name:"未知技能",text:"无描述",manaCost:0},oe={...W,heroPower:{name:K.name,description:K.text,type:"active",cost:K.manaCost,cooldown:0,currentCooldown:0,use:()=>{}}};k.push(new re(`ai-${j+1}`,oe))}e.initGame(p,o,k,n)};ve(()=>{C()});const m=M=>{const n=e.availableHeroes.find(D=>D.id===M);n&&(e.selectHero(n),x(n),console.log("选择了英雄:",n.name))},u=()=>{e.endTurn()},i=L(()=>{if(!e.player)return!1;const n=[0,5,7,8,10,12,12][e.player.tavernLevel]||0;return e.player.gold>=n&&e.player.tavernLevel<6}),l=L(()=>e.player&&[0,5,7,8,10,12,12][e.player.tavernLevel]||0),d=()=>{e.refreshTavern()},v=()=>{e.upgradeTavern()},T=()=>{e.tavern?.isFrozen?e.unfreezeTavern():e.freezeTavern()},I=()=>{e.selectedMinion&&(e.buyMinion(e.selectedMinionIndex||0),e.cancelSelectMinion())},b=()=>{e.selectedMinion&&e.selectedMinionIndex!==null&&(e.sellMinion("minion",e.selectedMinionIndex),e.cancelSelectMinion())},ee=()=>{if(console.log("placeMinionFromHand被调用"),console.log("selectedMinion:",e.selectedMinion),console.log("selectedMinionIndex:",e.selectedMinionIndex),e.selectedMinion&&e.selectedMinionIndex!==null){console.log("开始从手牌放置随从到战场...");const M=e.placeMinionFromHand(e.selectedMinionIndex,0);console.log("放置随从结果:",M?"成功":"失败"),console.log("取消选择随从..."),e.cancelSelectMinion(),console.log("placeMinionFromHand执行完成")}else console.log("selectedMinion或selectedMinionIndex为空，无法放置随从")},te=()=>{e.cancelSelectMinion()},Q=M=>({taunt:"嘲讽",divine_shield:"圣盾",windfury:"风怒",super_windfury:"超级风怒",stealth:"潜行",charge:"冲锋",poisonous:"剧毒",reborn:"复生",immune:"免疫"})[M]||M,se=L(()=>e.gameState==="hero_selection"),ne=L(()=>e.gameState==="in_game");return(M,n)=>{const D=he,w=ye,$=ge,p=_e;return a(),r("div",qe,[se.value?(a(),N($,{key:0},{default:E(()=>[(a(!0),r(B,null,H(s(e).availableHeroes,o=>(a(),N(w,{span:8,key:o.id,onClick:k=>m(o.id)},{default:E(()=>[A(D,null,{default:E(()=>[t("div",Qe,[t("div",null,c(o.name.charAt(0)),1)]),t("div",We,[t("h2",null,c(o.name),1),t("div",null,[n[2]||(n[2]=t("span",null,"生命值:",-1)),t("span",null,c(o.health),1)]),o.armor>0?(a(),r("div",Ze,[n[3]||(n[3]=t("span",null,"护甲:",-1)),t("span",null,c(o.armor),1)])):y("",!0),t("div",null,[t("h3",null,c(o.heroPowerList?.[0]?.name||o.heroPower?.name||"未知技能"),1),t("p",null,c(o.heroPowerList?.[0]?.text||o.heroPower?.description||"无描述"),1),o.heroPowerList?.[0]?.manaCost>0||o.heroPower?.cost>0?(a(),r("div",et," 消耗: "+c(o.heroPowerList?.[0]?.manaCost||o.heroPower?.cost),1)):y("",!0)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):ne.value?(a(),r("div",tt,[t("div",st,[A(xe),A(Ye),A(je)]),t("div",nt,[t("div",ot,[n[4]||(n[4]=t("h2",null,"酒馆",-1)),t("div",at,[t("span",it,"等级 "+c(s(e).player?.tavernLevel||1),1),t("div",lt,"第几回合: "+c(s(e).currentTurn||1),1)])]),t("div",rt,[n[9]||(n[9]=t("div",{class:"player-name"},"玩家",-1)),t("div",ct,[n[5]||(n[5]=t("span",null,"生命值:",-1)),t("span",null,c(s(e).player?.hero?.health||30),1)]),t("div",dt,[n[6]||(n[6]=t("span",{class:"label"},"金币:",-1)),t("span",ut,c(s(e).player?.gold||0)+" / "+c(s(e).player?.maxGold||10),1)]),t("div",pt,[n[7]||(n[7]=t("span",{class:"label"},"回合:",-1)),t("span",vt,c(s(e).currentTurn),1)]),t("div",_t,[t("div",gt,c(s(e).selectedHero?.name||"未选择英雄"),1),t("div",yt,[n[8]||(n[8]=t("span",null,"生命值:",-1)),t("span",null,c(s(e).selectedHero?.health||0),1)])]),t("button",{class:"end-turn-button",onClick:u},"结束回合")]),t("div",ht,[t("button",{class:"action-button upgrade-button",disabled:!i.value,onClick:v},[t("span",mt,c(l.value),1),n[10]||(n[10]=F(" 升级 ",-1))],8,ft),t("button",{class:"action-button refresh-button",disabled:!(s(e).player&&s(e).player.gold>=1),onClick:d},[...n[11]||(n[11]=[t("span",{class:"cost"},"1",-1),F(" 刷新 ",-1)])],8,Mt),t("button",{class:J(["action-button freeze-button",{frozen:s(e).tavern?.isFrozen}]),onClick:T},c(s(e).tavern?.isFrozen?"解冻":"冻结"),3)]),s(e).selectedMinion||s(e).selectedSpell?(a(),r("div",kt,[t("div",bt,[n[12]||(n[12]=t("div",{class:"section-title"},"卡片类型",-1)),t("div",wt,[s(e).selectedMinion?(a(),r("span",St,c(s(e).selectedMinion.cardType==="minion"?"随从":"其他"),1)):s(e).selectedSpell?(a(),r("span",Ct,c(s(e).selectedSpell.type==="shaping"?"塑造法术":"法术"),1)):y("",!0)])]),t("div",Tt,[n[15]||(n[15]=t("div",{class:"section-title"},"属性加成",-1)),t("div",Dt,[s(e).selectedMinion&&s(e).selectedMinion.permanentBuffs?.length>0?(a(),r("div",$t,[n[13]||(n[13]=t("div",{class:"buff-type-label"},"永久加成：",-1)),t("div",Bt,[(a(!0),r(B,null,H(s(e).selectedMinion.permanentBuffs,o=>(a(),r("div",{key:o.id,class:"buff-item"},[t("span",Ht,c(o.source),1),t("span",Pt,[o.attackBonus!==0?(a(),r("span",xt,"攻+"+c(o.attackBonus),1)):y("",!0),o.healthBonus!==0?(a(),r("span",It,"血+"+c(o.healthBonus),1)):y("",!0),o.maxHealthBonus!==0?(a(),r("span",At,"最大血+"+c(o.maxHealthBonus),1)):y("",!0)])]))),128))])])):y("",!0),s(e).selectedMinion&&s(e).selectedMinion.temporaryBuffs?.length>0?(a(),r("div",Lt,[n[14]||(n[14]=t("div",{class:"buff-type-label"},"临时加成：",-1)),t("div",Nt,[(a(!0),r(B,null,H(s(e).selectedMinion.temporaryBuffs,o=>(a(),r("div",{key:o.id,class:"buff-item"},[t("span",Rt,c(o.source),1),t("span",zt,[o.attackBonus!==0?(a(),r("span",Ft,"攻+"+c(o.attackBonus),1)):y("",!0),o.healthBonus!==0?(a(),r("span",Ot,"血+"+c(o.healthBonus),1)):y("",!0),o.maxHealthBonus!==0?(a(),r("span",Ut,"最大血+"+c(o.maxHealthBonus),1)):y("",!0),o.turnsRemaining?(a(),r("span",Vt,"("+c(o.turnsRemaining)+"回合)",1)):y("",!0)])]))),128))])])):s(e).selectedMinion?(a(),r("div",jt,"无属性加成")):s(e).selectedSpell?(a(),r("div",Et,[t("span",null,"法术效果："+c(s(e).selectedSpell.text),1)])):y("",!0)])]),s(e).selectedMinion?(a(),r("div",Gt,[n[18]||(n[18]=t("div",{class:"section-title"},"关键词加成",-1)),t("div",Jt,[s(e).selectedMinion.permanentKeywords?.length>0?(a(),r("div",Kt,[n[16]||(n[16]=t("div",{class:"keyword-type-label"},"永久关键词：",-1)),t("div",Xt,[(a(!0),r(B,null,H(s(e).selectedMinion.permanentKeywords,o=>(a(),r("span",{key:o,class:"keyword-item permanent-keyword"},c(Q(o)),1))),128))])])):y("",!0),s(e).selectedMinion.temporaryKeywords?.length>0?(a(),r("div",Yt,[n[17]||(n[17]=t("div",{class:"keyword-type-label"},"临时关键词：",-1)),t("div",qt,[(a(!0),r(B,null,H(s(e).selectedMinion.temporaryKeywords,o=>(a(),r("span",{key:o,class:"keyword-item temporary-keyword"},c(Q(o)),1))),128))])])):(a(),r("div",Qt,"无关键词加成"))])])):y("",!0)])):y("",!0),s(e).selectedMinion?(a(),r("div",Wt,[t("span",null,"已选择: "+c(s(e).selectedMinion.name),1),s(e).selectedMinionSource==="tavern"?(a(),r("button",{key:0,class:"action-button",onClick:I},[t("span",Zt,c(s(e).selectedMinion.cost),1),n[19]||(n[19]=F(" 购买 ",-1))])):s(e).selectedMinionSource==="battlefield"?(a(),r("button",{key:1,class:"action-button",onClick:b}," 出售 ")):s(e).selectedMinionSource==="hand"?(a(),r("button",{key:2,class:"action-button",onClick:ee}," 放置随从 ")):y("",!0),t("button",{class:"action-button cancel-button",onClick:te},"取消选择")])):y("",!0),A(p,{onClick:f},{default:E(()=>[...n[20]||(n[20]=[F("调试",-1)])]),_:1})])])):s(e).gameState==="battle_result"?(a(),r("div",es,[t("div",ts,[n[22]||(n[22]=t("h2",null,"战斗结束",-1)),t("div",ss,[t("div",ns,[t("h3",null,c(s(e).battleResult?.winner?.hero?.name||"玩家")+" 获胜！",1),t("p",null,"剩余随从: "+c(s(e).battleResult?.winnerMinionsLeft||0),1)]),n[21]||(n[21]=t("div",{class:"vs"},"VS",-1)),t("div",os,[t("h3",null,c(s(e).battleResult?.loser?.hero?.name||"对手")+" 失败",1),t("p",null,"剩余随从: "+c(s(e).battleResult?.loserMinionsLeft||0),1)])]),t("div",as,[t("p",null,"造成伤害: "+c(s(e).battleResult?.damageDealt||0),1)]),t("button",{class:"continue-button",onClick:n[0]||(n[0]=(...o)=>s(e).returnFromBattle&&s(e).returnFromBattle(...o))},"继续游戏")])])):y("",!0),A(ae,{"debug-drawer-visible":h.value,"onUpdate:debugDrawerVisible":n[1]||(n[1]=o=>h.value=o),"game-state":s(e).gameState,"current-turn":s(e).currentTurn,onClose:_},null,8,["debug-drawer-visible","game-state","current-turn"]),s(e).dragArrow.visible?(a(),r("svg",is,[t("line",{x1:s(e).dragArrow.startX,y1:s(e).dragArrow.startY,x2:s(e).dragArrow.endX,y2:s(e).dragArrow.endY,stroke:"#ff6b6b","stroke-width":"3","stroke-linecap":"round"},null,8,ls),t("polygon",{points:S(s(e).dragArrow),fill:"#ff6b6b"},null,8,rs)])):y("",!0)])}}}),ps=z(cs,[["__scopeId","data-v-7f8babc2"]]);export{ps as default};
